{
  "permissions": {
    "allow": [
      "Bash(flutter clean:*)",
      "Bash(flutter pub:*)",
      "Bash(grep:*)",
      "Bash(dart test:*)",
      "Bash(flutter test:*)",
      "Bash(dart analyze:*)",
      "Bash(chmod:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/check-todos.py)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/task-dispatch-readiness-check.py:*)",
      "SlashCommand(/smart-version-check)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/check-version-sync.sh:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/check-work-log.sh:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/check-next-objectives.sh:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/version-progression-check.sh:*)",
      "Bash(echo:*)",
      "Bash(git add:*)",
      "Bash(flutter analyze:*)",
      "Bash(find:*)",
      "Bash(git commit:*)",
      "Bash(awk:*)",
      "Bash(for:*)",
      "Bash(do)",
      "Bash(done)",
      "Bash(xargs:*)",
      "Bash(if [ -f \"$file\" ])",
      "Bash(then)",
      "Bash(fi)",
      "Read(//tmp/**)",
      "Bash(cp:*)",
      "Bash(flutter gen-l10n:*)",
      "Bash(dart doc:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/5w1h-token-generator.sh generate:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/5w1h-token-generator.sh:*)",
      "Bash(git checkout:*)",
      "Bash(dart run build_runner build:*)",
      "mcp__context7__resolve-library-id",
      "mcp__context7__get-library-docs",
      "mcp__serena__find_symbol",
      "mcp__serena__find_referencing_symbols",
      "mcp__serena__find_definition",
      "mcp__serena__insert_after_symbol",
      "mcp__serena__insert_before_symbol",
      "mcp__serena__replace_symbol",
      "mcp__serena__search_for_pattern",
      "mcp__serena__list_dir",
      "Echo *",
      "Bash(flutter:*)",
      "mcp__serena__get_symbols_overview",
      "mcp__serena__replace_symbol_body",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/work-log-manager.sh:*)",
      "Bash(dart run:*)",
      "Bash(dart compile:*)",
      "mcp__serena__check_onboarding_performed",
      "mcp__serena__onboarding",
      "mcp__serena__find_file",
      "mcp__serena__write_memory",
      "mcp__serena__think_about_collected_information",
      "Bash(while read file)",
      "Bash(do if ! grep -q \"$file\" ../settings.local.json)",
      "Bash(then echo \"$file\")",
      "Bash(__NEW_LINE__ fi)",
      "Bash(__NEW_LINE__ done)",
      "Bash(mkdir:*)",
      "Bash(./.claude/hooks/check-version-sync.sh:*)",
      "Bash(./hooks/check-work-log.sh:*)",
      "Bash(./hooks/check-version-sync.sh:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/scripts/resume-mission-complete.sh)",
      "Bash(./.claude/scripts/resume-mission-complete.sh:*)",
      "Bash(rm:*)",
      "Bash(cat:*)",
      "Read(///**)",
      "Bash(bc)",
      "Bash(dart:*)",
      "Bash(./scripts/run_database_integration_tests.sh:*)",
      "Bash(while IFS= read -r file)",
      "Bash(do echo \"測試檔案: $file\")",
      "Bash(/dev/null)",
      "SlashCommand(/generate-context-resume)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/generate-context-resume.sh)",
      "mcp__serena__think_about_task_adherence",
      "Bash(/Users/mac-eric/project/book_overview_app/.claude/hooks/5w1h-token-generator.sh:*)",
      "Bash(git log:*)",
      "Bash(.claude/hooks/stage-completion-validation-check.sh:*)",
      "Bash($CLAUDE_PROJECT_DIR/.claude/hooks/stage-completion-validation-check.sh:*)",
      "Bash(bash:*)",
      "WebFetch(domain:dart.dev)",
      "Bash(python -m pytest .claude/hooks/tests/test_dart_parser.py -v --tb=short)",
      "Bash(python3 -m pytest .claude/hooks/tests/test_dart_parser.py -v --tb=short)",
      "Bash(python3 -m pip install:*)",
      "Bash(python3:*)",
      "Bash(if [ -f /Users/tarragon/Projects/book_overview_app/.claude/TASK_AVOIDANCE_FIX_MODE ])",
      "Bash(else)",
      "Bash({ echo \"=== 最終驗證報告 ===\")",
      "Bash(})",
      "Bash(git worktree:*)",
      "Bash(source:*)",
      "Bash(should_check_file \"README.md\")",
      "Bash(should_check_file \"test/widget_test.dart\")",
      "Bash(should_check_file \"lib/main.dart\")",
      "Bash(should_check_file \"docs/work-logs/v0.12.0-main.md\")",
      "Bash(./.claude/hooks/check-next-objectives.sh:*)",
      "Bash(./.claude/hooks/version-progression-check.sh:*)",
      "Bash(ls:*)",
      "Bash(do file=\"docs/work-logs/v0.12.H.$i\" if ls $file*.md)",
      "Bash(while read f)",
      "WebFetch(domain:www.plurk.com)",
      "WebFetch(domain:www.anthropic.com)",
      "Bash(head:*)",
      "Bash(do echo -n \"$agent: \")",
      "Bash(if grep -q \"^model:\" /Users/tarragon/Projects/book_overview_app/.claude/agents/$agent.md)",
      "Bash(then echo \"❌ 有 model 欄位\")",
      "Bash(else echo \"✅ 無 model 欄位（預設 sonnet）\")",
      "Bash(uv run --with pytest pytest .claude/hooks/tests/test_5w1h_compliance_hook.py::TestCore -v --tb=short)",
      "Bash(uv run --with pytest pytest .claude/hooks/tests/test_5w1h_compliance_hook.py::TestCore::test_TC_CORE_001_executor_implementation_standard_format -v -s)",
      "Bash(uv run --with pytest pytest .claude/hooks/tests/test_5w1h_compliance_hook.py::TestCore -v)",
      "Bash(uv run pytest .claude/hooks/tests/test_agent_dispatch_check.py -v --tb=short)",
      "Bash(test -x .claude/hooks/task-dispatch-readiness-check.py)",
      "Bash(test -x .claude/hooks/tests/test_agent_dispatch_check.py)",
      "Bash(uv run test_agent_dispatch_check.py)",
      "Bash(uv run test_agent_dispatch_check.py::test_error_dispatch)",
      "Bash(python .claude/hooks/tests/test_agent_dispatch_check.py)",
      "Bash(.claude/hooks/tests/test_agent_dispatch_check.py)",
      "Bash(./scripts/sync-claude-push.sh \"測試 CHANGELOG 自動更新機制（方案 B）\n\n- 驗證 sync-push 時自動更新版本號\n- 驗證 CHANGELOG 自動記錄變更\n- 驗證版本號正確遞增\")",
      "Bash(git fetch claude-shared)",
      "Bash(timeout 240 flutter test:*)",
      "Bash(git push:*)",
      "Bash(git subtree:*)",
      "Bash(git --exec-path:*)",
      "Bash(./scripts/sync-claude-push.sh:*)"
    ],
    "deny": [],
    "ask": [],
    "additionalDirectories": [
      "/Users/mac-eric/project/book_overview_v1",
      "/Users/mac-eric/project/blog/content/"
    ]
  },
  "enableAllProjectMcpServers": true,
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/startup-check-hook.sh"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/prompt-submit-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/task-avoidance-detection-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/pre-design-dependency-check.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/task-dispatch-readiness-check.py"
          }
        ]
      },
      {
        "matcher": "TodoWrite",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/check-5w1h-compliance.py"
          }
        ]
      },
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/task-avoidance-block-check.sh"
          }
        ]
      },
      {
        "matcher": "Bash.*git commit",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/pre-commit-hook.sh"
          }
        ]
      },
      {
        "matcher": "Bash.*flutter test|Bash.*dart test",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/pre-test-hook.sh"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/markdown_formatter.py"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/performance-monitor-hook.sh post-edit start"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/post-edit-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/code-smell-detection-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/post-edit-task-doc-validation.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/architecture-debt-detection-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/auto-documentation-update-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/performance-monitor-hook.sh post-edit end"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/comment-qa-hook.py",
            "timeout": 30000
          }
        ]
      },
      {
        "matcher": "Bash.*flutter test|Bash.*dart test",
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/performance-monitor-hook.sh test start"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/post-test-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/performance-monitor-hook.sh test end"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/check-todos.py",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/stop-hook.sh"
          },
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/pm-trigger-hook.sh"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/check-todos.py",
            "timeout": 5
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "$CLAUDE_PROJECT_DIR/.claude/hooks/pre-compact.py"
          }
        ]
      }
    ]
  }
}
