# ğŸš€ ä»£ç†äººåˆ†æ´¾éŒ¯èª¤æ¢å¾© - å¿«é€Ÿåƒè€ƒå¡ç‰‡

## âš¡ 3 æ­¥é©Ÿå¿«é€Ÿæ¢å¾©

### 1ï¸âƒ£ è­˜åˆ¥éŒ¯èª¤

**Hook è¿”å›éŒ¯èª¤è¨Šæ¯æ ¼å¼**ï¼š

```text
âŒ ä»£ç†äººåˆ†æ´¾éŒ¯èª¤ï¼š
ä»»å‹™é¡å‹ï¼šHook é–‹ç™¼
ç•¶å‰ä»£ç†äººï¼šparsley-flutter-developer
æ­£ç¢ºä»£ç†äººï¼šbasil-hook-architect  â† æ‰¾é€™ä¸€è¡Œ
```

### 2ï¸âƒ£ æ‰¾æ­£ç¢ºä»£ç†äºº

**é—œéµæ¬„ä½**ï¼š`æ­£ç¢ºä»£ç†äººï¼šXXX`

### 3ï¸âƒ£ é‡æ–°åˆ†æ´¾

```python
Task(
    subagent_type="basil-hook-architect",  # ä½¿ç”¨æ­£ç¢ºä»£ç†äºº
    description="é–‹ç™¼ Hook è…³æœ¬",
    prompt="[åŸå§‹ prompt]"
)
```

---

## ğŸ“‹ éŒ¯èª¤è¨Šæ¯ç¯„ä¾‹

### Hook é–‹ç™¼éŒ¯èª¤

```text
âŒ ä»£ç†äººåˆ†æ´¾éŒ¯èª¤ï¼š
ä»»å‹™é¡å‹ï¼šHook é–‹ç™¼
ç•¶å‰ä»£ç†äººï¼šparsley-flutter-developer
æ­£ç¢ºä»£ç†äººï¼šbasil-hook-architect
```

**è™•ç†**ï¼šæ”¹ç”¨ `basil-hook-architect`

### æ–‡ä»¶æ•´åˆéŒ¯èª¤

```text
âŒ ä»£ç†äººåˆ†æ´¾éŒ¯èª¤ï¼š
ä»»å‹™é¡å‹ï¼šæ–‡ä»¶æ•´åˆ
ç•¶å‰ä»£ç†äººï¼šparsley-flutter-developer
æ­£ç¢ºä»£ç†äººï¼šthyme-documentation-integrator
```

**è™•ç†**ï¼šæ”¹ç”¨ `thyme-documentation-integrator`

### Phase 4 é‡æ§‹éŒ¯èª¤

```text
âŒ ä»£ç†äººåˆ†æ´¾éŒ¯èª¤ï¼š
ä»»å‹™é¡å‹ï¼šPhase 4 é‡æ§‹
ç•¶å‰ä»£ç†äººï¼šparsley-flutter-developer
æ­£ç¢ºä»£ç†äººï¼šcinnamon-refactor-owl
```

**è™•ç†**ï¼šæ”¹ç”¨ `cinnamon-refactor-owl`

---

## ğŸ” åˆ¤æ–·æ˜¯å¦éœ€è¦é‡è©¦

### âœ… éœ€è¦é‡è©¦

- éŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œ**ä»£ç†äººåˆ†æ´¾éŒ¯èª¤**ã€
- éŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œ**æ­£ç¢ºä»£ç†äººï¼š**ã€

### âŒ ä¸éœ€è¦é‡è©¦

- å…¶ä»–éŒ¯èª¤ï¼ˆç¼ºå°‘åƒè€ƒæ–‡ä»¶ã€æ¸¬è©¦å¤±æ•—ç­‰ï¼‰
- ç„¡æ³•è§£ææ­£ç¢ºä»£ç†äºº
- å·²é”æœ€å¤§é‡è©¦æ¬¡æ•¸ï¼ˆé è¨­ 1 æ¬¡ï¼‰

---

## ğŸ›  å·¥å…·æŒ‡ä»¤

### æŸ¥çœ‹ç³¾æ­£æ­·å²

```bash
# æŸ¥çœ‹æœ€è¿‘ 10 ç­†
python .claude/hooks/agent_dispatch_recovery.py history 10
```

### æŸ¥çœ‹çµ±è¨ˆè³‡è¨Š

```bash
# æŸ¥çœ‹çµ±è¨ˆ
python .claude/hooks/agent_dispatch_recovery.py stats
```

---

## âš ï¸ å¸¸è¦‹èª¤åˆ¤è™•ç†

### Phase 4 é‡æ§‹åŒ…å«ã€ŒHookã€é—œéµå­—

**éŒ¯èª¤ prompt**ï¼š
```text
"v0.12.N Phase 4: ä»£ç†äººåˆ†æ´¾æª¢æŸ¥ Hook é‡æ§‹è©•ä¼°"
```

**Hook èª¤åˆ¤ç‚º**ï¼šHook é–‹ç™¼ï¼ˆéŒ¯èª¤ï¼‰

**æ­£ç¢ºè™•ç†**ï¼š
```text
# é¸é … A: ç§»é™¤é—œéµå­—
"v0.12.N Phase 4: ä»£ç†äººåˆ†æ´¾æª¢æŸ¥åŠŸèƒ½é‡æ§‹è©•ä¼°"

# é¸é … B: åŠ å‰ç¶´
"[Phase 4 é‡æ§‹] v0.12.N: ä»£ç†äººåˆ†æ´¾æª¢æŸ¥ Hook é‡æ§‹è©•ä¼°"
```

---

## ğŸ“Š ä»£ç†äººå°ç…§è¡¨

| ä»»å‹™é¡å‹ | æ­£ç¢ºä»£ç†äºº |
|---------|-----------|
| Hook é–‹ç™¼ | basil-hook-architect |
| æ–‡ä»¶æ•´åˆ | thyme-documentation-integrator |
| ç¨‹å¼ç¢¼æ ¼å¼åŒ– | mint-format-specialist |
| Phase 1 åŠŸèƒ½è¨­è¨ˆ | lavender-interface-designer |
| Phase 2 æ¸¬è©¦è¨­è¨ˆ | sage-test-architect |
| Phase 3a ç­–ç•¥è¦åŠƒ | pepper-test-implementer |
| Phase 3b Flutter å¯¦ä½œ | parsley-flutter-developer |
| Phase 4 é‡æ§‹åŸ·è¡Œ | cinnamon-refactor-owl |

---

## ğŸš¨ ç„¡é™å¾ªç’°é˜²è­·

### å…§å»ºä¿è­·

- **æœ€å¤§é‡è©¦æ¬¡æ•¸**ï¼š1 æ¬¡ï¼ˆé è¨­ï¼‰
- **è§£æå¤±æ•—åœæ­¢**ï¼šç„¡æ³•è§£ææ™‚ç«‹å³åœæ­¢
- **éåˆ†æ´¾éŒ¯èª¤åœæ­¢**ï¼šå…¶ä»–éŒ¯èª¤ä¸è§¸ç™¼é‡è©¦

### æ‰‹å‹•æª¢æŸ¥

è¨˜éŒ„å·²å˜—è©¦çš„ä»£ç†äººåˆ—è¡¨ï¼Œé¿å… A â†’ B â†’ A å¾ªç’°ã€‚

---

## ğŸ”§ Hook æ¨¡å¼åˆ‡æ›ï¼ˆv0.12.N.10+ï¼‰

### åˆ‡æ›æ¨¡å¼

**ç’°å¢ƒè®Šæ•¸ï¼ˆè‡¨æ™‚ï¼‰**ï¼š
```bash
export HOOK_MODE=warning   # è­¦å‘Šæ¨¡å¼
export HOOK_MODE=strict    # åš´æ ¼æ¨¡å¼ï¼ˆé è¨­ï¼‰
```

**é…ç½®æª”æ¡ˆï¼ˆæŒä¹…ï¼‰**ï¼š
```json
// .claude/hook-config.json
{
  "agent_dispatch_check": {
    "mode": "warning"
  }
}
```

### æ¨¡å¼èªªæ˜

| æ¨¡å¼ | è¡Œç‚º | é©ç”¨å ´æ™¯ |
|------|------|---------|
| **strict**ï¼ˆé è¨­ï¼‰ | é˜»æ“‹åŸ·è¡Œ | æ­£å¼é–‹ç™¼ |
| **warning** | è­¦å‘Š + å…è¨±åŸ·è¡Œ | é–‹ç™¼æ¸¬è©¦ |

### æŸ¥çœ‹è­¦å‘Šè¨˜éŒ„

```bash
# æŸ¥çœ‹æ‰€æœ‰è­¦å‘Š
cat .claude/hook-logs/agent-dispatch-warnings.jsonl

# æœ€è¿‘ 10 ç­†
tail -n 10 .claude/hook-logs/agent-dispatch-warnings.jsonl
```

---

## ğŸ“š å®Œæ•´æ–‡ä»¶

**è©³ç´°æŒ‡å—**ï¼š`docs/agent-dispatch-auto-retry-guide.md`
**å·¥å…·æ¨¡çµ„**ï¼š`.claude/hooks/agent_dispatch_recovery.py`
**æ¸¬è©¦å¥—ä»¶**ï¼š`.claude/hooks/tests/test_error_recovery.py`
**é…ç½®ç¯„ä¾‹**ï¼š`.claude/hook-config.json.example`

---

**ç‰ˆæœ¬**ï¼šv0.12.N.10+
**æœ€å¾Œæ›´æ–°**ï¼š2025-10-18
