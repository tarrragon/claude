# 📋 關鍵情境決策流程

## 🔴 測試失敗情境

**觸發條件**: 任何測試失敗、通過率 < 100%

**正確執行流程**:

1. **立即停止** 所有其他工作
2. **啟動設計師分析**：使用 lavender-interface-designer 深入分析問題根因
3. **制定修復方案**：基於分析結果制定完整解決方案
4. **徹底修復**：實施方案直到達成 100% 通過率
5. **驗證完整性**：確認修復沒有引入新問題

**禁止行為**:

- ❌ 跳過失敗的測試
- ❌ 認為 92% 通過率「已經很好」
- ❌ 先處理其他「更重要」的工作
- ❌ 採用臨時修補方案

## 🔴 複雜問題情境

**觸發條件**: 問題看起來複雜、不知道解法、需要長時間研究

**正確執行流程**:

1. **承認複雜性**：接受問題複雜，但拒絕放棄
2. **問題分解**：將複雜問題分解為可管理的子問題
3. **啟動專業 agent**：根據問題類型選擇合適的專業 agent
4. **逐一攻克**：按優先級逐一解決子問題
5. **記錄經驗**：在工作日誌中詳細記錄解決過程供未來參考

**禁止行為**:

- ❌ 認為問題「太複雜」而放棄
- ❌ 尋求「權宜方案」
- ❌ 跳過問題處理其他工作
- ❌ 採用「暫時性」解決方案

## 🔴 架構問題情境

**觸發條件**: 發現設計缺陷、技術債務、架構不一致

**正確執行流程**:

1. **立即停止功能開發**：架構問題優先級最高
2. **評估影響範圍**：分析問題可能影響的模組和功能
3. **啟動重構設計師**：使用 cinnamon-refactor-owl 制定重構計劃
4. **制定修復計劃**：詳細的步驟和時程安排
5. **徹底修正**：完全解決架構問題後再繼續功能開發

**禁止行為**:

- ❌ 認為架構問題「影響不大」
- ❌ 想要「之後再處理」
- ❌ 繼續在有問題的架構上開發功能
- ❌ 採用簡單修補而非根本性解決

## 🔴 時間壓力情境

**觸發條件**: 感受到時間壓力，想要「快速解決」問題

**正確思維轉換**:

1. **重新定義緊急**：技術債務會累積複利效應，修復成本隨時間指數增長
2. **維護成本評估**：現在不徹底解決的問題會轉化為未來的維護負擔
3. **交接責任**：快速解決會將隱藏複雜性轉移給未來的維護者
4. **透明溝通**：向利害關係人說明徹底解決與快速修補的長期成本差異

**正確執行流程**:

1. **暫停催促**：拒絕在品質上妥協
2. **重新評估**：真正的截止日期 vs 感知的壓力
3. **透明溝通**：解釋徹底解決的長期價值
4. **堅持標準**：按照正確流程徹底解決問題

## 🔴 Agent 協作情境

**觸發條件**: 需要專業 agent 協助解決問題

**正確協作流程**:

1. **明確問題定義**：清楚描述需要解決的問題
2. **選擇合適 agent**：根據問題類型選擇對應專業 agent
3. **提供完整上下文**：建立或更新上下文文件
4. **遵循 TDD 流程**：按照 4 階段協作流程執行
5. **完整實施**：按照 agent 提供的指導完整實施

**Agent 選擇指南**:

- 功能設計問題 → lavender-interface-designer
- 測試設計問題 → sage-test-architect
- 實作規劃問題 → pepper-test-implementer
- 重構品質問題 → cinnamon-refactor-owl
- 架構設計問題 → basil-event-architect
- 效能優化問題 → ginger-performance-tuner

## ⚡ 緊急決策檢查清單

**任何重要決策前，30秒快速檢查**:

- [ ] 這個決策符合三大鐵律嗎？（測試/永不放棄/架構零容忍）
- [ ] 我是否出現了違規警報詞彙？
- [ ] 這是在解決根本問題，還是在逃避問題？
- [ ] 這個決策會對接手的人造成隱形傷害嗎？
- [ ] 6個月後我是否還記得這個決策的脈絡和原因？
- [ ] 6個月後這個決策是否會變得難以調整或無法維護？

---

**🔗 相關文件連結**:

- [返回主指導文件](../../CLAUDE.md)
- [違規警報與預防](violation-prevention.md)
- [自我監控與糾錯機制](self-monitoring.md)
