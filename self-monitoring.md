# 🔍 自我監控與糾錯機制

## 決策前檢查機制（30秒檢查）

### 🎯 核心鐵律檢查

**每個重要決策前必須通過的檢查**:

- [ ] **測試通過率鐵律**：是否有任何測試失敗？如有，必須立即修正
- [ ] **永不放棄鐵律**：是否想跳過或推遲任何問題？絕對禁止
- [ ] **架構債務零容忍鐵律**：是否發現架構問題卻想稍後處理？立即修正

### 🚨 違規信號檢查

**如果出現以下想法，立即停止並重新評估**:

- [ ] 我是否想說「這個問題太複雜」？
- [ ] 我是否覺得當前品質「已經夠好」？
- [ ] 我是否想採用「權宜」或「臨時」方案？
- [ ] 我是否因為其他工作而想推遲這個問題？

### 💭 長期影響評估

- [ ] **維護負擔**：這個決策會對接手的人造成隱形傷害嗎？
- [ ] **脈絡保存**：6個月後我是否還記得這個決策的脈絡和原因？
- [ ] **調整彈性**：6個月後這個決策是否會變得難以調整或無法維護？
- [ ] **技術債務**：這個決策會產生哪些具體的維護成本？

## 決策後驗證機制

### 📊 決策品質評估

**每個重要決策完成後，記錄以下資訊**:

- **決策內容**：具體做了什麼決策，影響了哪些程式碼或流程
- **符合規範度**：是否完全符合 CLAUDE.md 三大鐵律
- **維護複雜度**：這個決策增加或減少了多少維護負擔
- **脈絡記錄**：記錄決策的背景和原因，確保未來可追溯

### 🎯 成果驗證標準

**判斷決策執行是否成功的標準**:

- ✅ 問題得到根本性解決，沒有遺留隱患
- ✅ 所有測試 100% 通過
- ✅ 沒有新的技術債務產生
- ✅ 解決方案對未來維護者友善，複雜度可控
- ✅ 決策脈絡已完整記錄，可供未來參考和調整

## 違規行為補救機制

### 🚨 違規發現後的緊急流程

**如果發現自己做了違反 CLAUDE.md 的決策**:

1. **立即停止**：暫停所有當前工作
2. **承認違規**：誠實面對違規行為，不找藉口
3. **分析原因**：深入分析為什麼會做出違規決策
4. **重讀規範**：重新閱讀 CLAUDE.md 相關核心原則
5. **制定補救**：制定具體的補救措施
6. **記錄學習**：在工作日誌中詳細記錄違規原因和預防措施

### 🔧 常見違規類型的補救方法

#### 跳過測試失敗

**補救措施**:

- 立即回到失敗的測試
- 啟動 lavender-interface-designer 深度分析
- 制定完整修復方案
- 修復直到 100% 通過

#### 採用權宜方案

**補救措施**:

- 撤回權宜方案
- 重新分析問題根本原因
- 設計正確的解決方案
- 完整實施正確方案

#### 推遲架構問題

**補救措施**:

- 停止所有功能開發
- 啟動 cinnamon-refactor-owl 制定重構計劃
- 徹底修正架構問題
- 建立防止類似問題的機制

### 📝 違規記錄模板

**在工作日誌中記錄違規學習**:

```markdown
## 🚨 違規行為學習記錄

### 違規行為描述

- **發生時間**: [時間戳]
- **違規類型**: [跳過測試/權宜方案/推遲架構問題/其他]
- **具體行為**: [詳細描述做了什麼違規的事情]

### 違規原因分析

- **直接觸發因素**: [是什麼讓我做出這個決策]
- **資訊環境**: [當時掌握的資訊、時間壓力、外部約束]
- **判斷失誤**: [哪些判斷邏輯出現問題，遺漏了什麼考量]

### 正確做法應該是

- **按照規範**: [應該遵循哪個具體規範]
- **正確流程**: [應該執行什麼流程]
- **預期結果**: [如果按正確做法，會得到什麼結果]

### 預防措施

- **檢查點加強**: [在決策流程中加入哪些檢查點]
- **提醒機制**: [建立什麼提醒機制防止再犯]
- **學習要點**: [從這次違規中學到的關鍵教訓]
```

## 持續改進機制

### 📈 定期自我評估

**每週進行一次規範遵循度評估**:

- 回顧本週所有重要決策
- 評估每個決策的規範符合度
- 識別違規傾向和改進機會
- 調整監控機制的有效性

### 🎯 長期品質追蹤

**追蹤指標**:

- 測試通過率維持 100% 的連續時間
- 發現問題到徹底解決的平均時間
- 技術債務的產生和清理速度
- 違規行為的頻率和類型

### 💡 監控機制優化

**根據實際使用情況持續改進**:

- 哪些檢查點最有效？
- 哪些違規類型最容易發生？
- 如何讓監控機制更簡單易用？
- 如何在壓力情況下也能有效運作？

---

**🔗 相關文件連結**:

- [返回主指導文件](../../CLAUDE.md)
- [違規警報與預防](violation-prevention.md)
- [關鍵情境決策流程](decision-workflows.md)
